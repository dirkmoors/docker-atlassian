machine:
    pre:
      - curl -sSL https://s3.amazonaws.com/circle-downloads/install-circleci-docker.sh | bash -s -- 1.10.0
    services:
      - docker
    python:
      version: 2.7.12
dependencies:
    pre:
        # Login to docker
        - docker login -e ${DOCKER_EMAIL} -u ${DOCKER_USER} -p ${DOCKER_PASS}
    override:
        # Install Docker Compose
        - sudo pip install --upgrade docker-compose
test:
    override:
        # Build images
        - make build

deployment:
  hub:
    branch: master
    commands:
        # Push images
        - make push
